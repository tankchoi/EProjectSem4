<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Chi tiết Hóa đơn</title>
    <link rel="stylesheet" th:href="@{/assets/css/admin/pages/laptop/index.css}">
    <link rel="stylesheet" th:href="@{/assets/css/admin/pages/receipt/receipt.css}">
    <link rel="stylesheet" th:href="@{/assets/css/admin/fragments/nav-side.css}">
    <link rel="stylesheet" th:href="@{/assets/css/admin/fragments/nav-top.css}">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body>
    <div class="main-container">
        <div th:replace="admin/fragments/nav-side :: nav-side"></div>
        <div th:replace="admin/fragments/nav-top :: nav-top"></div>
        <div class="page-container">
            <div class="page-header">
                <div class="header-content">
                    <h1>Admin /</h1>
                    <h1>Quản lý Hóa đơn</h1>
                </div>
            </div>
            <div class="dashboard-header">
                <div class="dashboard-title">
                    <h1>Chi tiết Hóa đơn #<span th:text="${invoice.id}"></span></h1>
                    <div class="flex gap-2">
                        <a th:href="@{/admin/receipt/edit/{id}(id=${invoice.id})}"
                            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            Chỉnh sửa
                        </a>
                        <a th:href="@{/admin/receipt}"
                            class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                            Quay lại
                        </a>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Thông tin hóa đơn -->
                <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Thông tin Hóa đơn</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Mã hóa đơn:</span>
                            <span th:text="'#' + ${invoice.id}" class="text-gray-800">#1</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Tổng tiền:</span>
                            <span
                                th:text="${#numbers.formatDecimal(invoice.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'"
                                class="text-green-600 font-bold">1,000,000 VNĐ</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Trạng thái:</span>
                            <span th:if="${invoice.status == 'PAID'}"
                                class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Đã thanh
                                toán</span>
                            <span th:if="${invoice.status == 'UNPAID'}"
                                class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">Chưa thanh
                                toán</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Ngày tạo:</span>
                            <span th:text="${#dates.format(invoice.createdAt, 'dd/MM/yyyy HH:mm')}"
                                class="text-gray-800">12/01/2025 10:30</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Cập nhật lần cuối:</span>
                            <span th:text="${#dates.format(invoice.updatedAt, 'dd/MM/yyyy HH:mm')}"
                                class="text-gray-800">12/01/2025 10:30</span>
                        </div>
                    </div>
                </div>

                <!-- Thông tin yêu cầu bảo hành -->
                <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Thông tin Yêu cầu Bảo hành</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Mã yêu cầu:</span>
                            <span th:text="'#' + ${invoice.request.id}" class="text-gray-800">#1</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Ngày đặt lịch:</span>
                            <span th:text="${#dates.format(invoice.request.bookingDate, 'dd/MM/yyyy')}"
                                class="text-gray-800">12/01/2025</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Trạng thái yêu cầu:</span>
                            <span th:if="${invoice.request.status == 'PENDING'}"
                                class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded">Đang
                                chờ</span>
                            <span th:if="${invoice.request.status == 'APPROVED'}"
                                class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Đã
                                duyệt</span>
                            <span th:if="${invoice.request.status == 'REJECTED'}"
                                class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">Từ chối</span>
                        </div>
                        <div class="col-span-2">
                            <span class="font-medium text-gray-600">Mô tả sự cố:</span>
                            <p th:text="${invoice.request.description}" class="text-gray-800 mt-1 break-words">Mô tả sự
                                cố chi tiết...</p>
                        </div>
                    </div>
                </div>

                <!-- Thông tin khách hàng -->
                <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Thông tin Khách hàng</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Họ và tên:</span>
                            <span th:text="${invoice.request.fullname}" class="text-gray-800">Tên khách hàng</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Email:</span>
                            <span th:text="${invoice.request.email}" class="text-gray-800">email@example.com</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Số điện thoại:</span>
                            <span th:text="${invoice.request.phone}" class="text-gray-800">0123456789</span>
                        </div>
                        <div class="col-span-2">
                            <span class="font-medium text-gray-600">Địa chỉ:</span>
                            <p th:text="${invoice.request.address}" class="text-gray-800 mt-1 break-words">Địa chỉ khách
                                hàng</p>
                        </div>
                    </div>
                </div>

                <!-- Thông tin thiết bị -->
                <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
                    <h2 class="text-xl font-bold mb-4 text-gray-800">Thông tin Thiết bị</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Tên laptop:</span>
                            <span th:text="${invoice.request.customerLaptop.laptop.name}" class="text-gray-800">Tên
                                laptop</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Hãng:</span>
                            <span th:text="${invoice.request.customerLaptop.laptop.brand}"
                                class="text-gray-800">Hãng</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Model:</span>
                            <span th:text="${invoice.request.customerLaptop.laptop.model}"
                                class="text-gray-800">Model</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Serial Number:</span>
                            <span th:text="${invoice.request.customerLaptop.serialNumber}"
                                class="text-gray-800">Serial</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Ngày mua:</span>
                            <span th:text="${#dates.format(invoice.request.customerLaptop.purchaseDate, 'dd/MM/yyyy')}"
                                class="text-gray-800">Ngày mua</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium text-gray-600">Kỹ thuật viên:</span>
                            <span
                                th:text="${invoice.request.technician != null ? invoice.request.technician.fullname : 'Chưa phân công'}"
                                class="text-gray-800">Kỹ thuật viên</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nút in hóa đơn -->
            <div class="mt-6 text-center">
                <button onclick="window.print()"
                    class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-6 rounded">
                    <span class="material-symbols-outlined inline mr-2">print</span>
                    In Hóa đơn
                </button>
            </div>
        </div>
    </div>

    <script th:src="@{/assets/js/admin/script.js}"></script>
</body>

</html>