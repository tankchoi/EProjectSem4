<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết nhân viên</title>
    <link rel="stylesheet" th:href="@{/assets/css/admin/pages/staff/view.css}">
    <link rel="stylesheet" th:href="@{/assets/css/admin/fragments/nav-side.css}">
    <link rel="stylesheet" th:href="@{/assets/css/admin/fragments/nav-top.css}">
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="main-container">
        <div th:replace="admin/fragments/nav-side :: nav-side"></div>
        <div th:replace="admin/fragments/nav-top :: nav-top"></div>
        <div class="page-container">
            <div class="page-header">
                <div class="header-content">
                    <span class="material-symbols-outlined">person</span>
                    <h1>Admin / Chi tiết nhân viên</h1>
                </div>
            </div>

            <!-- Flash Messages -->
            <div th:if="${success}" class="alert alert-success">
                <span class="material-symbols-outlined">check_circle</span>
                <span th:text="${success}"></span>
            </div>

            <div class="dashboard-header">
                <div class="dashboard-title">
                    <h1>
                        <span class="material-symbols-outlined"
                            style="vertical-align: middle; margin-right: 8px;">badge</span>
                        Chi tiết nhân viên #<span th:text="${staff.id}">1</span>
                    </h1>
                    <p>Xem và quản lý thông tin chi tiết của nhân viên</p>
                </div>
                <div class="action-buttons">
                    <a th:href="@{/admin/staff}" class="btn-outline-secondary">
                        <span class="material-symbols-outlined">arrow_back</span>
                        Quay lại danh sách
                    </a>
                    <a th:href="@{/admin/staff/{id}/edit(id=${staff.id})}" class="btn-warning">
                        <span class="material-symbols-outlined">edit</span>
                        Chỉnh sửa
                    </a>
                </div>
            </div>

            <!-- Breadcrumb -->
            <div class="breadcrumb">
                <ul class="breadcrumb-list">
                    <li class="breadcrumb-item">
                        <a href="/admin/dashboard">
                            <span class="material-symbols-outlined">home</span>
                            Dashboard
                        </a>
                    </li>
                    <li class="breadcrumb-separator">
                        <span class="material-symbols-outlined">chevron_right</span>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="/admin/staff">
                            <span class="material-symbols-outlined">group</span>
                            Nhân viên
                        </a>
                    </li>
                    <li class="breadcrumb-separator">
                        <span class="material-symbols-outlined">chevron_right</span>
                    </li>
                    <li class="breadcrumb-item active">Chi tiết</li>
                </ul>
            </div>

            <div class="page-content">
                <!-- Main Content -->
                <div class="main-content">
                    <!-- Staff Info Card -->
                    <div class="info-card">
                        <div class="card-header">
                            <h3>
                                <span class="material-symbols-outlined">person</span>
                                Thông tin cá nhân
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">account_circle</span>
                                        Tên đăng nhập
                                    </div>
                                    <div class="info-value" th:text="${staff.username}">username</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">admin_panel_settings</span>
                                        Vai trò
                                    </div>
                                    <div class="info-value">
                                        <span class="role-badge"
                                            th:classappend="${staff.role == T(vn.aptech.java.models.User.Role).ADMIN} ? 'role-admin' : 
                                                             (${staff.role == T(vn.aptech.java.models.User.Role).STAFF} ? 'role-staff' : 'role-customer')"
                                            th:text="${staff.role == T(vn.aptech.java.models.User.Role).STAFF} ? 'Nhân viên' : 
                                                       (${staff.role == T(vn.aptech.java.models.User.Role).ADMIN} ? 'Quản trị viên' : 'Khách hàng')">
                                            <span class="material-symbols-outlined">work</span>
                                            Nhân viên
                                        </span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">badge</span>
                                        Họ và tên
                                    </div>
                                    <div class="info-value" th:text="${staff.fullname}">Họ và tên</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">toggle_on</span>
                                        Trạng thái
                                    </div>
                                    <div class="info-value">
                                        <span class="status-badge"
                                            th:classappend="${staff.status == T(vn.aptech.java.models.User.Status).ACTIVE} ? 'status-active' : 'status-banned'"
                                            th:text="${staff.status == T(vn.aptech.java.models.User.Status).ACTIVE} ? 'Hoạt động' : 'Đã khóa'">
                                            <span class="material-symbols-outlined"
                                                th:text="${staff.status == T(vn.aptech.java.models.User.Status).ACTIVE} ? 'check_circle' : 'block'"></span>
                                            Trạng thái
                                        </span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">email</span>
                                        Email
                                    </div>
                                    <div class="info-value" th:text="${staff.email}">email@example.com</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">phone</span>
                                        Số điện thoại
                                    </div>
                                    <div class="info-value" th:text="${staff.phone}">0123456789</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">calendar_add_on</span>
                                        Ngày tạo
                                    </div>
                                    <div class="info-value"
                                        th:text="${#dates.format(staff.createdAt, 'dd/MM/yyyy HH:mm:ss')}">
                                        01/01/2024 00:00:00
                                    </div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">update</span>
                                        Cập nhật lần cuối
                                    </div>
                                    <div class="info-value"
                                        th:text="${#dates.format(staff.updatedAt, 'dd/MM/yyyy HH:mm:ss')}">
                                        01/01/2024 00:00:00
                                    </div>
                                </div>
                                <div th:if="${staff.img_link}" class="info-item full-width">
                                    <div class="info-label">
                                        <span class="material-symbols-outlined">image</span>
                                        Ảnh đại diện
                                    </div>
                                    <div class="info-value">
                                        <div class="avatar-container">
                                            <img th:src="${staff.img_link}" alt="Avatar" class="avatar">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Content -->
                <div class="sidebar-content">
                    <!-- Actions Card -->
                    <div class="info-card">
                        <div class="card-header">
                            <h3>
                                <span class="material-symbols-outlined">build</span>
                                Thao tác
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="actions-section">
                                <a th:href="@{/admin/staff/{id}/edit(id=${staff.id})}" class="btn-warning">
                                    <span class="material-symbols-outlined">edit</span>
                                    Chỉnh sửa thông tin
                                </a>

                                <form th:if="${staff.status == T(vn.aptech.java.models.User.Status).ACTIVE}"
                                    th:action="@{/admin/staff/{id}/delete(id=${staff.id})}" method="post"
                                    onsubmit="return confirm('Bạn có chắc chắn muốn khóa tài khoản này?')">
                                    <button type="submit" class="btn-danger">
                                        <span class="material-symbols-outlined">block</span>
                                        Khóa tài khoản
                                    </button>
                                </form>

                                <form th:if="${staff.status == T(vn.aptech.java.models.User.Status).BANNED}"
                                    th:action="@{/admin/staff/{id}/restore(id=${staff.id})}" method="post"
                                    onsubmit="return confirm('Bạn có chắc chắn muốn khôi phục tài khoản này?')">
                                    <button type="submit" class="btn-success">
                                        <span class="material-symbols-outlined">lock_open</span>
                                        Khôi phục tài khoản
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Auto-hide alerts after 5 seconds
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(alert => {
                    alert.style.transition = 'opacity 0.5s ease';
                    alert.style.opacity = '0';
                    setTimeout(() => {
                        if (alert.parentNode) {
                            alert.parentNode.removeChild(alert);
                        }
                    }, 500);
                });
            }, 5000);
        });
    </script>
</body>

</html>