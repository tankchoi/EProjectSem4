<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Log Viewer</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background: #1e1e1e;
            color: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: #007bff;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .instructions {
            background: #28a745;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .log-container {
            background: #2d2d2d;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-size: 12px;
            line-height: 1.4;
        }

        .timestamp {
            color: #ffd700;
        }

        .debug-line {
            color: #00ff00;
        }

        .error-line {
            color: #ff6b6b;
        }

        .service-line {
            color: #4ecdc4;
        }

        .controller-line {
            color: #45b7d1;
        }

        .update-button {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }

        .clear-button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        .controls {
            margin-bottom: 15px;
        }

        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üîç Debug Log Viewer</h1>
            <p>Theo d√µi logs t·ª´ ·ª©ng d·ª•ng Spring Boot trong real-time</p>
        </div>

        <div class="instructions">
            <h3>üìã H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</h3>
            <ol>
                <li>ƒê·∫£m b·∫£o ·ª©ng d·ª•ng Spring Boot ƒëang ch·∫°y</li>
                <li>M·ªü trang edit request trong tab kh√°c</li>
                <li>Click "Show Debug Panel" trong form edit</li>
                <li>Submit form ƒë·ªÉ xem logs</li>
                <li>Logs s·∫Ω hi·ªÉn th·ªã c·∫£ ·ªü debug panel v√† trong console c·ªßa browser</li>
            </ol>
        </div>

        <div class="controls">
            <button class="update-button" onclick="updateLogs()">üîÑ Refresh Logs</button>
            <button class="clear-button" onclick="clearLogs()">üóëÔ∏è Clear Logs</button>
        </div>

        <div class="log-container" id="logContainer">
            <div class="timestamp">[Loading...]</div>
            ƒêang t·∫£i logs t·ª´ terminal...

            T√¨m ki·∫øm c√°c d√≤ng log ch·ª©a:
            - "=== DEBUG UPDATE REQUEST ===" (t·ª´ Controller)
            - "=== SERVICE DEBUG UPDATE REQUEST ===" (t·ª´ Service)
            - "DTO - Fullname:" (d·ªØ li·ªáu t·ª´ form)
            - "Saved request ID:" (k·∫øt qu·∫£ sau khi save)
            - "Error updating request:" (n·∫øu c√≥ l·ªói)
        </div>

        <div class="status info" id="status">
            ‚ÑπÔ∏è S·∫µn s√†ng theo d√µi logs. H√£y submit form edit request ƒë·ªÉ xem debug logs xu·∫•t hi·ªán.
        </div>
    </div>

    <script>
        let logCount = 0;

        function updateLogs() {
            const logContainer = document.getElementById('logContainer');
            const status = document.getElementById('status');

            // Simulate log updates (in real scenario, this would fetch from server)
            const currentTime = new Date().toLocaleTimeString();
            logCount++;

            logContainer.innerHTML = `
<span class="timestamp">[${currentTime}]</span> <span class="debug-line">Log refresh #${logCount}</span>

<span class="controller-line">C√°c debug logs t·ª´ Controller s·∫Ω xu·∫•t hi·ªán t·∫°i ƒë√¢y khi b·∫°n submit form:</span>
- === DEBUG UPDATE REQUEST ===
- Request ID: [ID]
- DTO - CustomerLaptopId: [value]
- DTO - Fullname: [value]
- DTO - Email: [value]
- Binding errors: [true/false]

<span class="service-line">C√°c debug logs t·ª´ Service s·∫Ω xu·∫•t hi·ªán t·∫°i ƒë√¢y:</span>
- === SERVICE DEBUG UPDATE REQUEST ===
- Service - Request ID: [ID]
- Found existing request: [ID]
- Existing fullname: [old value]
- After setting - fullname: [new value]
- Saving to database...
- Saved request ID: [ID]

<span class="error-line">L∆∞u √Ω:</span> ƒê·ªÉ xem logs th·ª±c t·∫ø, h√£y:
1. M·ªü terminal ƒëang ch·∫°y ·ª©ng d·ª•ng Spring Boot
2. Submit form edit request
3. Xem logs xu·∫•t hi·ªán trong terminal
4. Ho·∫∑c xem trong Debug Panel c·ªßa form edit
            `;

            status.innerHTML = `‚úÖ Logs ƒë√£ ƒë∆∞·ª£c refresh l√∫c ${currentTime}`;
            status.className = 'status success';

            setTimeout(() => {
                status.innerHTML = '‚ÑπÔ∏è S·∫µn s√†ng theo d√µi logs. H√£y submit form edit request ƒë·ªÉ xem debug logs xu·∫•t hi·ªán.';
                status.className = 'status info';
            }, 3000);
        }

        function clearLogs() {
            const logContainer = document.getElementById('logContainer');
            const status = document.getElementById('status');

            logContainer.innerHTML = `
<span class="timestamp">[${new Date().toLocaleTimeString()}]</span> <span class="debug-line">Logs cleared</span>

ƒêang ch·ªù logs m·ªõi t·ª´ form submission...
            `;

            status.innerHTML = 'üóëÔ∏è Logs ƒë√£ ƒë∆∞·ª£c x√≥a';
            status.className = 'status success';

            setTimeout(() => {
                status.innerHTML = '‚ÑπÔ∏è S·∫µn s√†ng theo d√µi logs. H√£y submit form edit request ƒë·ªÉ xem debug logs xu·∫•t hi·ªán.';
                status.className = 'status info';
            }, 2000);
        }

        // Auto refresh every 5 seconds
        setInterval(updateLogs, 5000);

        // Initial load
        updateLogs();
    </script>
</body>

</html>